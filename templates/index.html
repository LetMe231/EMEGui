<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MD-01 Controller</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/style.css" rel="stylesheet">
</head>

<body class="text-center">

  <div class="container my-3">

    <!-- Connection Row -->
    <div class="row mb-3">
      <div class="col-md-12 d-flex justify-content-center">
        <form id="connectForm" class="d-flex me-2">
          <select name="port" class="form-select me-2">
            {% for p in ports %}
              <option value="{{p}}" {% if state.port == p %}selected{% endif %}>{{p}}</option>
            {% endfor %}
          </select>
          <button type="submit" class="btn btn-success">Verbinden</button>
        </form>

        <button id="disconnectBtn" type="button" class="btn btn-danger me-2">Trennen</button>
        <button id="darkModeBtn" type="button"
                class="btn btn-secondary"
                data-label-light="🌙 Dark Mode"
                data-label-dark="☀️ Light Mode">
          🌙 Dark Mode
        </button>
      </div>
    </div>

    <!-- Movement Row -->
    <div class="row mb-3">
      <div class="col-md-12 d-flex justify-content-center">

        <form id="setForm" class="d-flex me-2">
          <input type="number" name="az" min="0" max="359" step="0.1"
                 value="{{state.az}}" class="form-control me-2" placeholder="Az">
          <input type="number" name="el" min="15" max="90" step="0.1"
                 value="{{state.el}}" class="form-control me-2" placeholder="El">
          <button type="submit" class="btn btn-primary">Setzen</button>
        </form>

        <div class="btn-group ms-2">
          <button id="trackerBtn" type="button" class="btn btn-success">Tracker Start</button>
          <button id="stopBtn" type="button" class="btn btn-warning">Stop</button>
          <button id="parkBtn" type="button" class="btn btn-info">Park</button>
        </div>

        <div class="form-check ms-3 align-self-center">
          <input class="form-check-input" type="checkbox" id="forceTrackChk">
          <label class="form-check-label" for="forceTrackChk">Force below 15°</label>
        </div>
      </div>
    </div>
  </div>

  <!-- Graphics -->
  <div class="canvas-container">
    <div class="canvas-card text-center">
      <canvas id="azCanvas" width="300" height="300"></canvas>
      <p id="azText" class="status-text mt-2">Current angle: --°</p>
      <p id="azMoonText" class="moon-text">Moon angle: --°</p>
    </div>

    <div class="canvas-card text-center">
      <canvas id="elCanvas" width="300" height="300"></canvas>
      <p id="elText" class="status-text mt-2">Current angle: --°</p>
      <p id="elMoonText" class="moon-text">Moon angle: --°</p>
    </div>

    <div class="canvas-card text-center">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0">Antenna Camera</h5>
        <div class="btn-group">
          <button id="camFsBtn" type="button" class="btn btn-outline-info">⛶ Fullscreen</button>
    </div>
  </div>

  <!-- Wrap the <img> so we can fullscreen the whole area -->
  <div id="camFsContainer" class="cam-fs-container">
    <img id="camStream" src="/video.mjpg" alt="Camera stream" class="camera-frame">
  </div>
</div>


  <!-- Status bar -->
  <div id="status-bar">{{ state.status }}</div>

  <script src="/static/app.js"></script>
</body>
</html>
